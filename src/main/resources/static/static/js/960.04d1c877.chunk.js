(self.webpackChunkggroup=self.webpackChunkggroup||[]).push([[960],{8905:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var s=t(2483),r=t(4686),l=t(2997),i=(t(1148),t(9661),t(6723));const c=()=>{const[e,a]=(0,s.useState)(null),[t,c]=(0,s.useState)(null),[n,o]=(0,s.useState)(""),[m,d]=(0,s.useState)(!1),[p,u]=(0,s.useState)(null),[f,h]=(0,s.useState)(!1),g=localStorage.getItem("token");(0,s.useEffect)((()=>{if(g){const e=JSON.parse(atob(g.split(".")[1]));u(e.userId)}}),[g]),(0,s.useEffect)((()=>{if(p){(async()=>{try{const e=await r.A.get("/api/jobapplications/user/".concat(p),{headers:{Authorization:"Bearer ".concat(g)}});if(200===e.status&&e.data){const t=e.data;a(t.profileImagePath||null),c(t.resumePath||null)}}catch(e){o("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062c\u0644\u0628 \u0628\u064a\u0627\u0646\u0627\u062a \u0637\u0644\u0628 \u0627\u0644\u0648\u0638\u064a\u0641\u0629.")}})()}}),[p,g]);const j="http://localhost:8080";return(0,i.jsxs)("div",{className:"container mt-5 cdwork",children:[(0,i.jsx)("h2",{className:"my-4 text-center",children:"\u0625\u0636\u0627\u0641\u0629 \u0637\u0644\u0628 \u0648\u0638\u064a\u0641\u0629"}),n&&(0,i.jsx)("div",{className:"alert alert-danger",children:n}),(0,i.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),d(!0),o(""),!e&&!t)return o("\u064a\u0631\u062c\u0649 \u062a\u062d\u0645\u064a\u0644 \u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062e\u0635\u064a \u0648\u0627\u0644\u0633\u064a\u0631\u0629 \u0627\u0644\u0630\u0627\u062a\u064a\u0629."),void d(!1);const s=new FormData;e instanceof File&&s.append("profileImage",e),t instanceof File&&s.append("file",t),s.append("userId",p);try{200===(await r.A.post("/api/jobapplications/create",s,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(g)}})).status&&(alert("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0637\u0644\u0628 \u0627\u0644\u0648\u0638\u064a\u0641\u0629 \u0628\u0646\u062c\u0627\u062d!"),h(!0))}catch(n){var l,i;o("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0625\u0636\u0627\u0641\u0629 \u0637\u0644\u0628 \u0627\u0644\u0648\u0638\u064a\u0641\u0629: ".concat((null===(l=n.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.message)||n.message))}finally{d(!1)}},children:[(0,i.jsxs)("div",{className:"form-group text-center mb-4",children:[(0,i.jsx)("label",{htmlFor:"profileImage",className:"form-label",children:"\u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062e\u0635\u064a"}),(0,i.jsxs)("div",{className:"profile-image-container",children:[(0,i.jsx)("input",{type:"file",className:"form-control d-none",id:"profileImage",onChange:e=>{const t=e.target.files[0];t&&a(t)},accept:"image/*"}),(e=>{if(e instanceof File)return(0,i.jsx)("img",{src:URL.createObjectURL(e),alt:"Profile",className:"profile-image img-fluid"});if(e){const a=e.startsWith("http")?e:"".concat(j).concat(e);return(0,i.jsx)("img",{src:a,alt:"Profile",className:"profile-image img-fluid"})}return(0,i.jsx)("div",{className:"profile-image-placeholder",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0635\u0648\u0631\u0629"})})(e),(0,i.jsx)("label",{htmlFor:"profileImage",className:"change-button cb",children:e?"\u062a\u063a\u064a\u064a\u0631":"\u0625\u0636\u0627\u0641\u0629"})]}),e&&!f&&(0,i.jsx)("button",{type:"button",className:"btn btn-danger mt-2",onClick:async()=>{if(!f&&e)try{await r.A.delete("/api/jobapplications/delete-profile-image/".concat(p),{params:{fileType:"profileImage"},headers:{Authorization:"Bearer ".concat(g)}}),a(null)}catch(n){o("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0625\u0632\u0627\u0644\u0629 \u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062e\u0635\u064a.")}},children:"\u0625\u0632\u0627\u0644\u0629 \u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062e\u0635\u064a"})]}),(0,i.jsxs)("div",{className:"form-group mb-4 text-center",children:[(0,i.jsx)("label",{htmlFor:"resume",className:"form-label",children:"\u0627\u0644\u0633\u064a\u0631\u0629 \u0627\u0644\u0630\u0627\u062a\u064a\u0629"}),(0,i.jsxs)("div",{className:"resume-container",children:[(0,i.jsx)("input",{type:"file",id:"resume",onChange:e=>{const a=e.target.files[0];a&&c(a)},accept:".pdf,.doc,.docx,.rtf,image/*",className:"d-none"}),t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"resume-preview mt-3",children:(()=>{const e=t instanceof File?URL.createObjectURL(t):"".concat(j).concat(t);return e.endsWith(".pdf")?(0,i.jsx)("div",{className:"pdf-preview-container",children:(0,i.jsx)(l.Worker,{workerUrl:"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",children:(0,i.jsx)(l.Viewer,{fileUrl:e})})}):e.match(/\.(jpeg|jpg|gif|png)$/)?(0,i.jsx)("img",{src:e,alt:"Resume Preview",className:"resume-preview img-fluid"}):(0,i.jsx)("div",{children:"\u0646\u0648\u0639 \u0627\u0644\u0645\u0644\u0641 \u063a\u064a\u0631 \u0645\u062f\u0639\u0648\u0645"})})()}),!f&&(0,i.jsx)("button",{type:"button",className:"btn btn-danger mt-2",onClick:async()=>{if(!f&&t)try{await r.A.delete("/api/jobapplications/delete-resume/".concat(p),{params:{fileType:"resume"},headers:{Authorization:"Bearer ".concat(g)}}),c(null)}catch(n){o("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0633\u064a\u0631\u0629 \u0627\u0644\u0630\u0627\u062a\u064a\u0629.")}},children:"\u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u0633\u064a\u0631\u0629 \u0627\u0644\u0630\u0627\u062a\u064a\u0629"})]}):(0,i.jsx)("label",{htmlFor:"resume",className:"change-button",children:"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0633\u064a\u0631\u0629 \u0627\u0644\u0630\u0627\u062a\u064a\u0629"})]})]}),(0,i.jsx)("div",{className:"form-group text-center",children:(0,i.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:m,children:m?"\u062c\u0627\u0631\u064a \u0627\u0644\u0625\u0636\u0627\u0641\u0629...":"\u062d\u0641\u0638 \u0627\u0644\u0637\u0644\u0628"})})]})]})}},7640:()=>{},3237:()=>{},7492:()=>{},1815:()=>{},6671:()=>{},2787:()=>{}}]);
//# sourceMappingURL=960.04d1c877.chunk.js.map